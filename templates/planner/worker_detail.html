{% extends "base.html" %}

{% block content %}
  <h1 class="d-flex justify-content-center display-2">{{ worker.first_name }} {{ worker.last_name }}</h1>
  <br>
  <div class="card card-body shadow border-0 table-wrapper table-responsive pb-4">
    <table class="table user-table align-items-center">
      <thead>
      <tr>

        <th class="border-bottom">Username</th>
        <th class="border-bottom">Full name</th>
        <th class="border-bottom">Position</th>
        <th class="border-bottom">Is staff</th>
        <th class="border-bottom">Is superuser</th>
        <th class="border-bottom">Opened Tasks</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>

            <div class="d-block">
              <span class="fw-bold">{{ worker.username }}</span>
            </div>

        </td>
        <td>

            <div class="d-block">
              <span class="fw-bold">{{ worker.first_name }} {{ worker.last_name }}</span>
              <div class="small text-gray">{{ worker.email }}</div>
            </div>

        </td>
        <td>
          <span class="fw-normal">
            {% if worker.position %}
              {{ worker.position.name }}
            {% else %}
              Unemployed
            {% endif %}
          </span>
        </td>
        <td>
          {% if worker.is_staff %}
            <span class="fw-normal text-success">{{ worker.is_staff }}</span>
          {% else %}
            <span class="fw-normal text-danger">{{ worker.is_staff }}</span>
          {% endif %}
        </td>
        <td>
          {% if worker.is_superuser %}
            <span class="fw-normal text-success">{{ worker.is_superuser }}</span>
          {% else %}
            <span class="fw-normal text-danger">{{ worker.is_superuser }}</span>
          {% endif %}
        </td>
        <td>
          <span class="fw-normal d-flex align-items-center">
            {% if not worker.tasks.count %}
            <svg class="icon icon-xxs text-success me-2" fill="currentColor" viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
              <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd">
              </path>
            {% else %}
              <svg class="icon icon-xxs text-purple me-2" fill="currentColor" viewBox="0 0 20 20"
                   xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" 
                      clip-rule="evenodd">
                </path>
            {% endif %}
              
            </svg> 
            {{ worker.tasks.count }} task{{ worker.tasks.count|pluralize }}
          </span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  {% if worker.tasks.all %}
    <div class="d-lg-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4">
      <div class="col-auto d-flex justify-content-between ps-0 mb-4 mb-lg-0">
        <div class="me-lg-3">
          <div class="dropdown">
            <button class="btn btn-secondary d-inline-flex align-items-center me-2 dropdown-toggle"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <svg class="icon icon-xs me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                   xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
              New Task
            </button>

          </div>
        </div>

      </div>
      <div class="col-12 col-lg-6 d-flex justify-content-lg-end">
        <input type="text" class="form-control w-100 fmxw-300"
               id="exampleInputIconLeft"
               placeholder="Search Tasks Here"
               aria-label="Search"
               aria-describedby="basic-addon3">
      </div>
    </div>

    {% for task in worker.tasks.all %}
      <div class="task-wrapper border bg-white shadow border-0 rounded">
        <div class="card hover-state border-bottom rounded-0 py-3">
          <div class="card-body d-sm-flex align-items-center flex-wrap flex-lg-nowrap py-0">
            {#              <div class="col-1 text-left text-sm-center mb-2 mb-sm-0">#}
            {#                <div class="form-check check-lg inbox-check me-sm-2"><input class="form-check-input" type="checkbox"#}
            {#                                                                            value="" id="mailCheck11"> <label#}
            {#                    class="form-check-label" for="mailCheck11"></label></div>#}
            {#              </div>#}
            <div class="col-11 col-lg-8 px-0 mb-4 mb-md-0">
              <div class="mb-2"><h3 class="h5"><a href="#">{{ task.name }}</a></h3>
                <div class="d-block d-sm-flex">
                  <div>
                    <h4 class="h6 fw-normal text-gray d-flex align-items-center mb-3 mb-sm-0">
                      <svg class="icon icon-xxs text-gray-500 me-2" fill="currentColor" viewBox="0 0 20 20"
                           xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                              d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                              clip-rule="evenodd"></path>
                      </svg>
                      {{ task.deadline }}
                    </h4>
                  </div>
                  {% if task.is_completed %}
                    <div class="ms-sm-3"><span class="badge super-badge bg-success">Done</span></div>
                  {% elif not task.assignees %}
                    <div class="ms-sm-3"><span class="badge super-badge bg-purple">Waiting</span></div>
                  {% else %}
                    <div class="ms-sm-3"><span class="badge super-badge bg-warning">In Progress</span></div>
                  {% endif %}
                </div>
              </div>
              <div><a href="#" class="fw-bold text-dark"> <span
                  class="fw-normal text-gray">{{ task.description }}</span>
              </a></div>
            </div>
            <div
                class="col-10 col-sm-2 col-lg-2 col-xl-2 d-none d-lg-block d-xl-inline-flex align-items-center ms-lg-auto text-right justify-content-end px-md-0">


              <a class="d-flex align-items-center m-lg-1" href="#">
                <svg class="icon icon-xs text-gray-400" fill="currentColor" viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path>
                  <path fill-rule="evenodd"
                        d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"
                        clip-rule="evenodd">
                  </path>
                </svg>
              </a>

              <a class="d-flex align-items-center m-lg-1" href="#">
                <svg class="icon icon-xs text-gray-400" fill="currentColor" viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg">
                  <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z">
                  </path>
                </svg>
              </a>

              <a class="d-flex align-items-center m-lg-1" href="#">
                <svg class="icon icon-xs text-gray-400" fill="currentColor" viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd"
                        d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                        clip-rule="evenodd">
                  </path>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <br>
    <span class="h6 fw-bold d-flex justify-content-center">There are no tasks.</span>
  {% endif %}
{% endblock %}
